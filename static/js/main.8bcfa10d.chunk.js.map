{"version":3,"sources":["logo.svg","App.tsx","reportWebVitals.ts","index.tsx"],"names":["getExtensionMarkdown","extensionName","extension","version","assets","template","console","log","Mustache","render","App","useState","extListString","setExtListString","resultMarkdown","setResultMarkdown","setTemplate","useEffect","extensions","split","a","Promise","all","map","ext","length","atIndex","indexOf","extName","slice","extVersion","headers","body","JSON","stringify","filters","criteria","filterType","value","flags","resolve","reject","fetch","method","then","res","json","results","versions","idx","files","forEach","f","assetName","assetType","replaceAll","source","md","displayName","toLowerCase","result","markdown","sort","b","join","className","src","logo","alt","rows","cols","onChange","event","preventDefault","target","readOnly","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8bcfa10d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.103b5fa1.svg\";","import React, { useEffect, useState } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Mustache from 'mustache';\n\nfunction getExtensionMarkdown(extensionName: string, extension: any, version: any, assets: any, template: string) {\n  console.log({ extension, version, assets }, assets['Microsoft_VisualStudio_Services_Icons_Small'])\n  return Mustache.render(template, { extension, version, assets, extensionName });\n}\n\nfunction App() {\n  const [extListString, setExtListString] = useState(\"\");\n  const [resultMarkdown, setResultMarkdown] = useState(\"\");\n  const defaultTemplate = '### ![]({{#assets.Microsoft_VisualStudio_Services_Icons_Small}}{{& assets.Microsoft_VisualStudio_Services_Icons_Small}}{{/assets.Microsoft_VisualStudio_Services_Icons_Small}}{{^assets.Microsoft_VisualStudio_Services_Icons_Small}}https://cdn.vsassets.io/v/M176_20201014.2/_content/Header/default_icon.png{{/assets.Microsoft_VisualStudio_Services_Icons_Small}}) [{{extension.displayName}}](https://marketplace.visualstudio.com/items?itemName={{extensionName}}) {{version.version}}\\n\\n> {{extension.shortDescription}}\\n\\n';\n  \n  const [template, setTemplate] = useState(defaultTemplate);\n\n  useEffect(() => {\n    const extensions = extListString.split(/\\n/);\n    console.log(\"Extensions\", extensions);\n    (async () => {\n      const result = await Promise.all(extensions.map(async(ext: string) => {\n        if (ext.length > 0) {\n          const atIndex = ext.indexOf(\"@\");\n          const extName = ext.slice(0, atIndex);\n          const extVersion = atIndex > -1 ? ext.slice(atIndex + 1, -1) : \"latest\";\n          console.log(`${ext} not found`);\n          const queryEndPoint = \"https://marketplace.visualstudio.com/_apis/public/gallery/extensionquery\";\n          const method = \"POST\";\n          const headers = {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json;api-version=3.0-preview.1\"\n          }\n          const body = JSON.stringify({\n            filters: [{\n              criteria: [\n                {\n                  filterType: 7,\n                  value: extName\n                },\n                {\n                  filterType: 8,\n                  value: \"Microsoft.VisualStudio.Code\"\n                }\n              ]\n            }],\n            flags: 0x80 | 0x01 | 0x02\n          });\n          return new Promise((resolve, reject) => (async () =>{\n            await fetch(queryEndPoint, { method, body, headers })\n            .then((res: Response) => res.json())\n            .then((res: any) => {\n              if (res.results.length > 0 && res.results[0].extensions.length > 0) {\n                const extension = res.results[0].extensions[0] as any;\n                const versions = extension.versions;\n                let version = versions[0];\n                console.log(\"ext\", extension, \"ver\", version);\n                for (let idx = 0; idx < versions.length; ++idx) {\n                  if (versions[idx].version === extVersion) {\n                    version = versions[idx];\n                    break;\n                  }\n                }\n                let assets: any = {};\n                version.files.forEach((f: any) => {\n                  const assetName = f.assetType.replaceAll('.', '_');\n                  assets[assetName] = f.source;\n                })\n                const md = getExtensionMarkdown(extName, extension, version, assets, template);\n                console.log(ext, md);\n                resolve([extension.displayName.toLowerCase(), md]);\n              }\n            });\n          })());\n        }\n      }));\n      const markdown = result.sort((a:any, b:any) => {\n        if (a[0] < b[0]) return -1;\n        if (a[0] > b[0]) return 1;\n        return 0;\n      }).map((a:any)=> a ? a[1] : \"\").join(\"\\n\");\n      setResultMarkdown(markdown)\n    })();\n  }, [extListString, template]);\n\n  const handleChangeExtList = (event: React.FormEvent) => {\n    event.preventDefault();\n    setExtListString((event.target as any).value);\n  }\n\n  const handleChangeTemplate = (event: React.FormEvent) => {\n    event.preventDefault();\n    setTemplate((event.target as any).value);\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"Apsp-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <div>paste <span className=\"code\">code --list-extensions --show-versions</span></div>\n        <textarea rows={10} cols={40} value={extListString} onChange={handleChangeExtList}></textarea>\n      </header>\n      <div>\n        <textarea rows={30} cols={120} value={resultMarkdown} readOnly={true}></textarea>\n      </div>\n      <div>\n        <textarea rows={30} cols={120} value={template} onChange={handleChangeTemplate}></textarea>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}